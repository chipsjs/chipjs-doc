{
  "openapi": "3.0.0",
  "info": {
    "title": "august-rest-api",
    "description": "august api server for mobile",
    "termsOfService": "{base_url}",
    "version": "8.8.0"
  },
  "servers": [],
  "paths": {
    "/users": {
      "get": {
        "summary": "Check existence of a user in the system",
        "description": "/! DEPRECATED: 410 GoneError",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/doorbells/:doorbellID": {
      "parameters": [
        {
          "name": "doorbellID",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "summary": "Get information about an existing doorbell and format settings",
        "description": "Returns resource not found if doorbellID does not exist.",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "HouseID": {
                      "type": "string",
                      "description": "String"
                    },
                    "HouseName": {
                      "type": "string",
                      "description": "String"
                    },
                    "LockID": {
                      "type": "string",
                      "description": "String"
                    },
                    "chimes": {
                      "type": "array",
                      "description": "Array",
                      "items": {}
                    },
                    "doorbellID": {
                      "type": "string",
                      "description": "String"
                    },
                    "firmwareVersion": {
                      "type": "string",
                      "description": "String"
                    },
                    "installUserID": {
                      "type": "string",
                      "description": "String"
                    },
                    "invitations": {
                      "type": "array",
                      "description": "Array",
                      "items": {}
                    },
                    "messagingProtocol": {
                      "type": "string",
                      "description": "String"
                    },
                    "name": {
                      "type": "string",
                      "description": "String"
                    },
                    "pubsubChannel": {
                      "type": "string",
                      "description": "String"
                    },
                    "recentImage": {
                      "type": "object",
                      "description": "Object",
                      "properties": {}
                    },
                    "secChipCertSerial": {
                      "type": "string",
                      "description": "String"
                    },
                    "serialNumber": {
                      "type": "string",
                      "description": "String"
                    },
                    "settings": {
                      "type": "object",
                      "description": "",
                      "properties": {
                        "buttonpush_notifications": {
                          "type": "boolean",
                          "description": "Boolean"
                        },
                        "buttonpush_notifications_partners": {
                          "type": "boolean",
                          "description": "Boolean"
                        },
                        "doorbellChime": {
                          "type": "boolean",
                          "description": "Boolean"
                        },
                        "flashBrightness": {
                          "type": "string",
                          "description": "String"
                        },
                        "indoorChimeEnabled": {
                          "type": "boolean",
                          "description": "Boolean"
                        },
                        "irConfiguration": {
                          "type": "number",
                          "description": "Number"
                        },
                        "motion_notifications": {
                          "type": "boolean",
                          "description": "Boolean"
                        },
                        "motionSensitivity": {
                          "type": "number",
                          "description": "Number"
                        },
                        "nightVision": {
                          "type": "string",
                          "description": "String"
                        },
                        "nightVisionBrightness": {
                          "type": "string",
                          "description": "String"
                        },
                        "notify_when_offline": {
                          "type": "boolean",
                          "description": "Boolean"
                        },
                        "pirEnabled": {
                          "type": "boolean",
                          "description": "Boolean"
                        },
                        "pirSensitivity": {
                          "type": "number",
                          "description": "Number"
                        },
                        "powerProfilePreset": {
                          "type": "string",
                          "description": "String"
                        },
                        "ringSoundEnabled": {
                          "type": "boolean",
                          "description": "Boolean"
                        },
                        "speakerVolume": {
                          "type": "number",
                          "description": "Number"
                        },
                        "videoResolution": {
                          "type": "string",
                          "description": "String"
                        }
                      }
                    },
                    "status": {
                      "type": "string",
                      "description": "String"
                    },
                    "type": {
                      "type": "string",
                      "description": "String"
                    },
                    "users": {
                      "type": "object",
                      "description": "",
                      "properties": {
                        "someUserID": {
                          "type": "object",
                          "description": "",
                          "properties": {
                            "FirstName": {
                              "type": "string",
                              "description": "String"
                            },
                            "LastName": {
                              "type": "string",
                              "description": "String"
                            },
                            "UserType": {
                              "type": "string",
                              "description": "String"
                            },
                            "identifiers": {
                              "type": "array",
                              "description": "Array of Strings",
                              "items": {}
                            },
                            "imageInfo": {
                              "type": "object",
                              "description": "Object",
                              "properties": {}
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/doorbells/:doorbellID/settings/doorbell": {
      "parameters": [
        {
          "name": "doorbellID",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "put": {
        "summary": "Update doorbell settings that are translated/transformed from client doorbell settings to validated doorbell settings",
        "description": "Able to update individual fields\n",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/locks/:lockID": {
      "parameters": [
        {
          "name": "lockID",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "summary": "Get information about an existing lock",
        "description": "Returns `resource not found` if lockID does not exist and `not authorized` if the user is not a user of the lock.The differences between this version of the endpoint and the 0.0.1 version are these:1. The type of the `currentFirmwareVersion` field has changed from a string to an object in this version.2. The key `pins` removed from response in this version",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "LockName": {
                      "description": "Text string"
                    },
                    "Type": {
                      "description": "lock type"
                    },
                    "Updated": {
                      "description": "date"
                    },
                    "Created": {
                      "description": "date"
                    },
                    "LockID": {
                      "description": "unique ID of lock"
                    },
                    "HouseID": {
                      "description": "id of house to which lock belongs"
                    },
                    "currentFirmwareVersion": {
                      "type": "object",
                      "description": "Object containing current firmware versions",
                      "properties": {}
                    },
                    "[users]": {
                      "type": "object",
                      "description": "",
                      "properties": {
                        "userid": {
                          "description": "user type"
                        },
                        "useridN": {
                          "description": "user type"
                        }
                      }
                    },
                    "[ruleHash]": {
                      "type": "object",
                      "description": "",
                      "properties": {
                        "ruleID": {
                          "type": "object",
                          "description": "",
                          "properties": {
                            "startTime": {
                              "description": "start time in ISO 8601 format"
                            },
                            "duration": {
                              "description": "duration"
                            },
                            "schedule": {
                              "description": "Rule schedule in iCalendar data format (RFC 5545)"
                            }
                          }
                        }
                      }
                    },
                    "homeKitUniqueIdentifier": {
                      "description": "id of homeKit to which lock belongs to"
                    },
                    "[hostLockInfo]": {
                      "description": "Information about the host lock"
                    },
                    "[hostID]": {
                      "description": "Host lock's ID"
                    },
                    "[hostHardwareLockInfo]": {
                      "description": "Information about the host hardware"
                    },
                    "[hostHardwareID]": {
                      "description": "Host hardware's ID"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/smartalert/rules": {
      "post": {
        "summary": "Creates smart alert with optional schedule",
        "description": "The user to be notified by this alert is the calling user",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "deviceID": {
                    "description": "Id of device associated with smart alert"
                  },
                  "deviceType": {
                    "description": "Type of device to associate smart alert with"
                  },
                  "otherUserID": {
                    "description": "User id or system user"
                  },
                  "schedule": {
                    "description": "optional ICAL schedule"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "ruleID": {
                      "type": "string",
                      "description": "string"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "Get smart alert rule per given query",
        "description": "When no query provided end point returns all smart alert rules associated with calling user",
        "parameters": [
          {
            "name": "deviceID",
            "in": "query",
            "required": false,
            "schema": {
              "description": "Id of device to return smart alert rules for"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "ruleID": {
                        "description": "Id of first rule"
                      },
                      "notifyUserID": {
                        "description": "Id of user to be notified with smart alert"
                      },
                      "otherUserID": {
                        "description": "User id or system user"
                      },
                      "schedule": {
                        "description": "optional ICAL schedule; may be omitted if not given"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/smartalert/rules/:ruleID": {
      "parameters": [
        {
          "name": "ruleID",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "summary": "Returns smart alert rule per given rule id",
        "description": "notifyUserID is always calling user",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "deviceID": {
                      "description": "Id of device associated with smart alert"
                    },
                    "devceType": {
                      "description": "Type of device assocaited with smart alert"
                    },
                    "notifyUserID": {
                      "description": "Id of user to be notified with smart alert"
                    },
                    "otherUserID": {
                      "description": "User id or system user"
                    },
                    "schedule": {
                      "description": "optional ICAL schedule; may be omitted if not given"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Deletes smart alert rule per given rule id",
        "description": "Marks rule as deleted; document is kept in db",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "put": {
        "summary": "Updates schedule of smart alert rule per given rule id",
        "description": "If schedule is not in body, schedule will be deleted in db",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "schedule": {
                      "description": "optional ICAL schedule; may be omitted if not given"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/partners": {
      "get": {
        "summary": "retrives a list of service offerings from partners that integrate with August",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "_id": {
                        "description": "ID of partner"
                      },
                      "name": {
                        "description": "name of partner"
                      },
                      "heroImageURL": {
                        "description": "URL to partner hero image"
                      },
                      "partnerURL": {
                        "description": "URL to partner homepage"
                      },
                      "logoURL": {
                        "description": "URL to partner logo"
                      },
                      "wordmarkURL": {
                        "description": "URL to partner wordmark"
                      },
                      "partnerTagline": {
                        "description": "partner tagline"
                      },
                      "jointTagline": {
                        "description": "tagline tailored to August"
                      },
                      "partnerDescription": {
                        "description": "company description"
                      },
                      "jointDescription": {
                        "description": "service offering description"
                      },
                      "promotion": {
                        "description": "available partnership promotions"
                      },
                      "locations": {
                        "description": "where the service is provided"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/locks": {
      "post": {
        "summary": "Adds a lock to a house.",
        "description": "Requestor must provide the serial number of the lock and a list of all afvertising locks.If LockID or Name are not present, a Bad Request error is returned.If the user is not a manager or superuser of the house, a Not Authorized error is returned.If the serial number does not match any of the advertising locks, a Not Authorized error is returned.If hostHardwareID is provided but does not exist, 404 ResourceNotFound",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "houseID": {
                    "description": "house id of the house where we wants to add the lock"
                  },
                  "serialNumber": {
                    "description": "serial number of lock [see notes]"
                  },
                  "LockIDs": {
                    "description": "unique identifiers of advertising locks [see notes]"
                  },
                  "LockName": {
                    "description": "name of lock"
                  },
                  "hostHardwareID": {
                    "description": "Host hardware's ID"
                  }
                },
                "required": [
                  "houseID",
                  "serialNumber",
                  "LockIDs",
                  "LockName"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "LockID": {
                      "description": "<unique ID of lock>"
                    },
                    "LockName": {
                      "description": "<Text string>"
                    },
                    "Type": {
                      "type": "integer",
                      "description": "Integer"
                    },
                    "Updated": {
                      "description": "YYYY-MM-DDTHH:MM:SS.mmmZ"
                    },
                    "Created": {
                      "description": "YYYY-MM-DDTHH:MM:SS.mmmZ"
                    },
                    "HouseID": {
                      "description": "ID of house to which lock was added"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/subscriptions": {
      "get": {
        "summary": "Returns subscriptions the calling user has access to",
        "description": "Returns house-level subscription.",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "subscriptionID": {
                        "description": "subscription ID"
                      },
                      "userID": {
                        "description": "subscription manager user ID"
                      },
                      "type": {
                        "description": "type of subscription"
                      },
                      "status": {
                        "description": "trial/paid/invalid"
                      },
                      "deviceType": {
                        "description": "device"
                      },
                      "deviceID": {
                        "description": "device ID"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}